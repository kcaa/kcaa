<meta charset="utf-8">
<polymer-element name="eplusx-kancolle-assistant">
  <template>
    <link rel="stylesheet" href="assistant.css">
    <div id="assistant">
      <div class="row twoColumn">
        <div class="column">
          <div class="board">
            <h3>ステータス</h3>
          </div>
        </div>
        <div class="column">
          <div class="board">
            <h3>クイックコマンド</h3>
          </div>
        </div>
      </div>
      <div class="row horizontal">
        <div class="board">
          <h3>任務一覧 ({{numQuestsUndertaken}}/{{numQuests}}個遂行中)</h3>
          <table>
            <col width="50px">
            <col>
            <col width="50px">
            <col width="50px">
            <col width="50px">
            <col width="50px">
            <col width="50px">
            <thead>
              <tr>
                <th>種別</th>
                <th>説明</th>
                <th>燃料</th>
                <th>弾薬</th>
                <th>鋼材</th>
                <th>ボーキ</th>
                <th>進捗</th>
              </tr>
            </thead>
            <tbody>
              <!-- This doesn't work with dart2js because it seems not
                   supporting accessing members (quest.state or the like). -->
              <tr template repeat="{{quest in quests}}"
                  class="{{quest.stateClass}}">
                <td class="labelColumn">
                  <div>{{quest.category}}</div>
                  <div>{{quest.cycle}}</div>
                </td>
                <td>
                  <div class="title">{{quest.name}}</div>
                  <div>{{quest.description}}</div>
                </td>
                <td>{{quest.fuel}}</td>
                <td>{{quest.ammo}}</td>
                <td>{{quest.steel}}</td>
                <td>{{quest.bauxite}}</td>
                <td>
                  <template if="{{quest.state != 'complete'}}">
                    {{quest.progress}}%
                  </template>
                  <template if="{{quest.state == 'complete'}}">
                    達成!
                  </template>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row horizontal">
        <div class="board">
          <h3>遠征一覧</h3>
          <table>
            <col width="70px">
            <col>
            <col width="50px">
            <col width="50px">
            <col width="50px">
            <col width="100px">
            <thead>
              <tr>
                <th>海域</th>
                <th>説明</th>
                <th>燃料</th>
                <th>弾薬</th>
                <th>時間</th>
                <th>遂行艦隊</th>
              </tr>
            </thead>
            <tbody>
              <tr template repeat="{{mission in missions}}"
                  class="{{mission.stateClass}}">
                <td class="labelColumn">
                  <div>{{mission.maparea}}</div>
                  <div>{{mission.difficulty}}</div>
                </td>
                <td>
                  <div class="title">{{mission.name}}</div>
                  <div>{{mission.description}}</div>
                </td>
                <td>
                  {{(mission.fuelConsumption * 100).toStringAsFixed(0)}}%
                </td>
                <td>
                  {{(mission.ammoConsumption * 100).toStringAsFixed(0)}}%
                </td>
                <td>{{mission.time}}分</td>
                <td>
                  <!-- It's easier to enclose everything with <template>, but
                       that introduces difficulty in CSS styling with
                       "td > div:first-child". -->
                  <div>{{mission.undertakingFleetName}}</div>
                  <div>
                    <template if="{{mission.undertakingFleetId != -1}}">
                      第{{mission.undertakingFleetId}}艦隊
                    </template>
                  </div>
                  <div>
                    <template if="{{mission.etaDatetimeString != null}}">
                      帰還: {{mission.etaDatetimeString}}
                    </template>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row horizontal">
        <div class="board">
          <h3>デバッグコントロール</h3>
          <h4>モジュールリロード</h4>
          <button on-click="{{reloadKCSAPIModules}}">KCSAPI</button>
          <h4>API出力</h4>
          <div>
            <template repeat="{{objectType in availableObjects}}">
              <button on-click="{{getObjectFromName}}">{{objectType}}</button>
            </template>
          </div>
        </div>
      </div>
      <div class="row horizontal">
        <div class="board">
          <h3>デバッグ情報</h3>
          <div class="debugInfo">{{debugInfo}}</div>
        </div>
      </div>
    </div>
  </template>
  <script type="application/dart" src="assistant.dart"></script>
</polymer-element>

